<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />

    <title>Student Management System</title>

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/png"
      href="https://th.bing.com/th/id/OIP.h1aYup34igWsovZ31cw-SAHaKS?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3"
    />

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- Custom CSS -->
    <link th:href="@{/css/style.css}" rel="stylesheet" />
  </head>

  <body>
    <div class="container mt-5">
      <!-- Header -->
      <h2 class="text-center mb-4 text-primary">
        <i class="bi bi-mortarboard-fill"></i>
        Quản Lý Sinh Viên
      </h2>

      <!-- Form thêm sinh viên -->
      <div class="card shadow mb-4">
        <div class="card-body">
          <h5 class="card-title mb-3">
            <i class="bi bi-plus-circle"></i>
            Thêm sinh viên
          </h5>

          <form
            th:action="@{/students}"
            th:object="${student}"
            method="post"
            class="row g-3"
          >
            <div class="col-md-4">
              <input
                type="text"
                th:field="*{name}"
                class="form-control"
                placeholder="Tên sinh viên"
                required
              />
            </div>

            <div class="col-md-4">
              <input
                type="number"
                th:field="*{age}"
                class="form-control"
                placeholder="Tuổi"
                required
              />
            </div>

            <div class="col-md-4">
              <input
                type="email"
                th:field="*{email}"
                class="form-control"
                placeholder="Email"
                required
              />
            </div>

            <div class="col-12 text-end">
              <button class="btn btn-primary px-4">
                <i class="bi bi-plus-circle"></i> Thêm
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Danh sách sinh viên -->
      <div class="card shadow">
        <div class="card-body">
          <h5 class="card-title mb-3">
            <i class="bi bi-list-ul"></i>
            Danh sách sinh viên
          </h5>

          <!-- Search -->
          <div class="row mb-3">
            <div class="col-md-6">
              <input
                type="text"
                id="searchInput"
                class="form-control"
                placeholder="Tìm theo tên hoặc email..."
                onkeyup="searchStudent()"
              />
            </div>
          </div>

          <table class="table table-hover table-bordered">
            <thead class="table-primary text-center">
              <tr>
                <th>ID</th>
                <th>Tên</th>
                <th>Tuổi</th>
                <th>Email</th>
                <th>Hành động</th>
              </tr>
            </thead>

            <tbody>
              <tr th:each="s : ${students}">
                <td th:text="${s.id}"></td>
                <td th:text="${s.name}"></td>
                <td th:text="${s.age}"></td>
                <td th:text="${s.email}"></td>
                <td class="text-center">
                  <a
                    th:href="@{/students/edit/{id}(id=${s.id})}"
                    class="btn btn-sm btn-warning me-1"
                  >
                    <i class="bi bi-pencil-square"></i> Sửa
                  </a>

                  <a
                    th:href="@{/students/delete/{id}(id=${s.id})}"
                    class="btn btn-sm btn-danger"
                    onclick="return confirm('Bạn có chắc muốn xóa?');"
                  >
                    <i class="bi bi-trash"></i> Xóa
                  </a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <footer class="bg-dark text-white text-center py-3 mt-5">
      <div>
        <i class="bi bi-code-slash"></i>
        Student Management System -Bùi Đức Huy
      </div>
      <div style="font-size: 14px">© 2024 | Java Spring Boot | MySQL</div>
    </footer>
    <script>
      function searchStudent() {
        const input = document.getElementById("searchInput");
        const filter = input.value.toLowerCase();
        const rows = document.querySelectorAll("tbody tr");

        rows.forEach((row) => {
          const name = row.children[1].textContent.toLowerCase();
          const email = row.children[3].textContent.toLowerCase();

          if (name.includes(filter) || email.includes(filter)) {
            row.style.display = "";
          } else {
            row.style.display = "none";
          }
        });
      }
    </script>
  </body>
</html>
